# HydrAI-SWE æ°´æ–‡çŸ¥è¯†åº“ç³»ç»Ÿ

## ğŸŒŠ æ¦‚è¿°

HydrAI-SWEæ°´æ–‡çŸ¥è¯†åº“ç³»ç»Ÿæ˜¯ä¸€ä¸ªä¸“ä¸šçš„ã€åŸºäºç§‘å­¦çš„æ°´æ–‡çŸ¥è¯†åº“ï¼Œä¸“é—¨ä¸ºé›ªæ°´å½“é‡(SWE)åˆ†æå’Œæ°´æ–‡é¢„æµ‹æä¾›æ·±åº¦è§£è¯»ã€‚è¯¥ç³»ç»Ÿé›†æˆäº†ï¼š

- **ä¸“ä¸šçŸ¥è¯†åº“**: æ¶µç›–SWEã€èé›ªè¿‡ç¨‹ã€å¾„æµç”Ÿæˆç­‰æ ¸å¿ƒæ¦‚å¿µ
- **åŒºåŸŸèƒŒæ™¯**: æ›¼å°¼æ‰˜å·´çœå’Œçº¢æ²³æµåŸŸçš„ç‰¹å®šæ°´æ–‡ç‰¹å¾
- **æ°”å€™å˜åŒ–**: å…¨çƒå’ŒåŒºåŸŸæ°”å€™å˜åŒ–å¯¹æ°´æ–‡ç³»ç»Ÿçš„å½±å“
- **æŠ€æœ¯è§£è¯»**: åŸºäºæ•°æ®çš„ä¸“ä¸šæ°´æ–‡è§£è¯»æ¨¡æ¿

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### 1. ä¸“ä¸šçŸ¥è¯†åº“
- **SWEåŸºç¡€çŸ¥è¯†**: å®šä¹‰ã€æµ‹é‡æ–¹æ³•ã€ç‰©ç†å±æ€§
- **èé›ªè¿‡ç¨‹**: èƒ½é‡å¹³è¡¡ã€èé›ªé€Ÿç‡ã€å½±å“å› ç´ 
- **å¾„æµç”Ÿæˆ**: æœºåˆ¶ã€SWEè´¡çŒ®ã€æ—¶é—´å…³ç³»
- **é¢„æµ‹æ–¹æ³•**: ç»Ÿè®¡ã€ç‰©ç†ã€æœºå™¨å­¦ä¹ æ–¹æ³•

### 2. åŒºåŸŸç‰¹å®šçŸ¥è¯†
- **æ›¼å°¼æ‰˜å·´çœæ°”å€™**: ä¸‰ä¸ªæ°”å€™å¸¦çš„è¯¦ç»†ç‰¹å¾
- **çº¢æ²³æµåŸŸ**: åœ°å½¢ã€åœŸå£¤ã€æ°´æ–‡ç‰¹å¾
- **å†å²äº‹ä»¶**: 1997å¹´å’Œ2009å¹´æ´ªæ°´äº‹ä»¶åˆ†æ
- **åŒºåŸŸæŒ‘æˆ˜**: å¹³å¦åœ°å½¢ã€ç²˜åœŸåœŸå£¤ã€æ’æ°´å›°éš¾

### 3. æ°”å€™å˜åŒ–èƒŒæ™¯
- **å…¨çƒè¶‹åŠ¿**: æ¸©åº¦ã€é™æ°´ã€ç§¯é›ªè¦†ç›–å˜åŒ–
- **åŒºåŸŸå½±å“**: æ›¼å°¼æ‰˜å·´çœç‰¹å®šå˜åŒ–é¢„æµ‹
- **é€‚åº”ç­–ç•¥**: é˜²æ´ªã€é¢„è­¦ã€ç®¡ç†å»ºè®®

### 4. ä¸“ä¸šè§£è¯»ç³»ç»Ÿ
- **è¶‹åŠ¿åˆ†æ**: ç»Ÿè®¡æ˜¾è‘—æ€§ã€å˜åŒ–å¹…åº¦ã€ç½®ä¿¡åº¦
- **å­£èŠ‚æ€§æ¨¡å¼**: å³°å€¼æ—¶é—´ã€æ¨¡å¼è¯†åˆ«ã€æ°´æ–‡æ„ä¹‰
- **å¼‚å¸¸æ£€æµ‹**: Z-scoreåˆ†æã€å¼‚å¸¸ç¨‹åº¦ã€é£é™©è¯„ä¼°
- **ç®¡ç†å»ºè®®**: åŸºäºæ•°æ®çš„ä¸“ä¸šå»ºè®®

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
src/
â”œâ”€â”€ knowledge/
â”‚   â””â”€â”€ hydrology_knowledge_base.py    # æ ¸å¿ƒçŸ¥è¯†åº“
â”œâ”€â”€ api/routers/
â”‚   â””â”€â”€ enhanced_interpretation.py     # å¢å¼ºè§£è¯»æœåŠ¡
â””â”€â”€ test_knowledge_base.py             # æµ‹è¯•è„šæœ¬
```

### æ ¸å¿ƒç»„ä»¶

#### 1. HydrologyKnowledgeBase
- åˆå§‹åŒ–ä¸“ä¸šçŸ¥è¯†åº“
- æä¾›åŒºåŸŸèƒŒæ™¯ä¿¡æ¯
- ç”Ÿæˆä¸“ä¸šè§£è¯»æ¨¡æ¿
- æ”¯æŒå¤šè¯­è¨€è¾“å‡º

#### 2. EnhancedInterpretationService
- è¶‹åŠ¿æ˜¾è‘—æ€§åˆ†æ
- å­£èŠ‚æ€§æ¨¡å¼æ£€æµ‹
- å¼‚å¸¸åˆ†æ•°è®¡ç®—
- æ•°æ®è´¨é‡è¯„ä¼°
- ä¸“ä¸šè§£è¯»ç”Ÿæˆ

#### 3. APIç«¯ç‚¹
- `/api/v1/interpretation/swe-comprehensive`: ç»¼åˆSWEè§£è¯»
- `/api/v1/interpretation/quick-assessment`: å¿«é€Ÿè¯„ä¼°
- `/api/v1/interpretation/knowledge-base/glossary`: æŠ€æœ¯è¯æ±‡è¡¨
- `/api/v1/interpretation/knowledge-base/climate-context`: æ°”å€™å˜åŒ–ä¿¡æ¯
- `/api/v1/interpretation/knowledge-base/regional-info`: åŒºåŸŸä¿¡æ¯

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. åŸºæœ¬ä½¿ç”¨

```python
from src.knowledge.hydrology_knowledge_base import HydrologyKnowledgeBase

# åˆ›å»ºçŸ¥è¯†åº“å®ä¾‹
kb = HydrologyKnowledgeBase()

# è·å–SWEè§£è¯»
interpretation = kb.get_swe_interpretation(
    trend_direction="increasing",
    trend_magnitude=25.5,
    seasonal_pattern="early_peak",
    anomaly_score=2.3,
    forecast_confidence=0.85
)

print(interpretation['trend_analysis']['description'])
print(interpretation['management_recommendations'])
```

### 2. APIä½¿ç”¨

```bash
# è·å–æŠ€æœ¯è¯æ±‡è¡¨
curl http://localhost:8000/api/v1/interpretation/knowledge-base/glossary

# å¿«é€ŸSWEè¯„ä¼°
curl -X POST http://localhost:8000/api/v1/interpretation/quick-assessment \
  -H "Content-Type: application/json" \
  -d '{"values": [50, 55, 60, 65, 70, 75, 80, 85, 90, 95]}'

# ç»¼åˆè§£è¯»
curl -X POST http://localhost:8000/api/v1/interpretation/swe-comprehensive \
  -H "Content-Type: application/json" \
  -d '{
    "values": [50, 55, 60, 65, 70, 75, 80, 85, 90, 95],
    "timestamps": ["2024-01-01", "2024-01-02", "2024-01-03"],
    "region": "manitoba"
  }'
```

### 3. é›†æˆåˆ°ç°æœ‰ç³»ç»Ÿ

```python
from src.api.routers.enhanced_interpretation import EnhancedInterpretationService

# åˆ›å»ºæœåŠ¡å®ä¾‹
service = EnhancedInterpretationService()

# åˆ†ææ•°æ®
trend_analysis = service.analyze_trend_significance(values, timestamps)
seasonal_patterns = service.detect_seasonal_patterns(values, timestamps)
anomaly_score = service.calculate_anomaly_score(values)
data_quality = service.assess_data_quality(values, timestamps)

# ç”Ÿæˆä¸“ä¸šè§£è¯»
interpretation = service.generate_professional_interpretation(
    trend_analysis, seasonal_patterns, anomaly_score, data_quality
)
```

## ğŸ“Š è§£è¯»ç¤ºä¾‹

### è¶‹åŠ¿åˆ†æè§£è¯»

**è¾“å…¥**: å¢åŠ è¶‹åŠ¿ï¼Œ25.5%å˜åŒ–ï¼Œæ—©æœŸå³°å€¼ï¼Œå¼‚å¸¸åˆ†æ•°2.3

**è¾“å‡º**:
```json
{
  "trend_analysis": {
    "description": "Strong increasing trend in SWE indicates significant accumulation patterns that may reflect climate change impacts or natural variability cycles.",
    "magnitude": "25.5%",
    "strength": "strong",
    "implications": [
      "Potential for increased spring flood risk",
      "Enhanced water storage for summer months",
      "Possible climate change signal",
      "Need for updated flood protection standards"
    ]
  },
  "anomaly_assessment": {
    "description": "Extremely high SWE values represent significant departure from normal conditions.",
    "score": 2.3,
    "severity": "extreme"
  },
  "management_recommendations": [
    "Monitor flood protection infrastructure capacity",
    "Update flood risk assessments and emergency plans",
    "Consider adaptive management strategies for changing conditions"
  ]
}
```

## ğŸ”¬ æŠ€æœ¯ç‰¹ç‚¹

### 1. ç§‘å­¦æ€§
- åŸºäºæ°´æ–‡å­¦åŸç†å’Œç§‘å­¦æ–‡çŒ®
- ç»Ÿè®¡æ˜¾è‘—æ€§æ£€éªŒ
- ç‰©ç†ä¸€è‡´æ€§æ£€æŸ¥
- ä¸“å®¶çŸ¥è¯†é›†æˆ

### 2. ä¸“ä¸šæ€§
- æ°´æ–‡ä¸“ä¸šæœ¯è¯­
- åŒºåŸŸç‰¹å®šçŸ¥è¯†
- æ°”å€™å˜åŒ–è€ƒè™‘
- ç®¡ç†å»ºè®®ç”Ÿæˆ

### 3. å¯æ‰©å±•æ€§
- æ¨¡å—åŒ–è®¾è®¡
- çŸ¥è¯†åº“å¯æ‰©å±•
- æ¨¡æ¿å¯å®šåˆ¶
- å¤šè¯­è¨€æ”¯æŒ

### 4. å®ç”¨æ€§
- ç›´æ¥APIæ¥å£
- å¿«é€Ÿè¯„ä¼°æœåŠ¡
- è¯¦ç»†è§£è¯»æŠ¥å‘Š
- ç®¡ç†å»ºè®®

## ğŸ§ª æµ‹è¯•

è¿è¡Œæµ‹è¯•è„šæœ¬éªŒè¯ç³»ç»ŸåŠŸèƒ½ï¼š

```bash
python test_knowledge_base.py
```

æµ‹è¯•åŒ…æ‹¬ï¼š
- çŸ¥è¯†åº“åŸºæœ¬åŠŸèƒ½
- è§£è¯»æœåŠ¡åŠŸèƒ½
- APIç«¯ç‚¹åŠŸèƒ½

## ğŸ“š çŸ¥è¯†æ¥æº

### 1. ç§‘å­¦æ–‡çŒ®
- æ°´æ–‡å­¦æ•™ç§‘ä¹¦å’ŒæœŸåˆŠ
- æ°”å€™å˜åŒ–ç ”ç©¶æŠ¥å‘Š
- åŒºåŸŸæ°´æ–‡ç ”ç©¶

### 2. ä¸“å®¶çŸ¥è¯†
- æ°´æ–‡ä¸“å®¶å’¨è¯¢
- åŒºåŸŸç»éªŒæ€»ç»“
- å†å²äº‹ä»¶åˆ†æ

### 3. æ•°æ®é©±åŠ¨
- ç»Ÿè®¡åˆ†æç»“æœ
- æ¨¡å‹éªŒè¯ç»éªŒ
- å®é™…åº”ç”¨åé¦ˆ

## ğŸ”„ æ›´æ–°å’Œç»´æŠ¤

### 1. çŸ¥è¯†åº“æ›´æ–°
- å®šæœŸæ›´æ–°ç§‘å­¦å‘ç°
- é›†æˆæ–°çš„ç ”ç©¶ç»“æœ
- æ›´æ–°åŒºåŸŸä¿¡æ¯

### 2. è§£è¯»æ¨¡æ¿ä¼˜åŒ–
- åŸºäºç”¨æˆ·åé¦ˆ
- æ€§èƒ½è¯„ä¼°ç»“æœ
- æ–°éœ€æ±‚é›†æˆ

### 3. è´¨é‡ä¿è¯
- ä¸“å®¶å®¡æŸ¥
- ç”¨æˆ·æµ‹è¯•
- æŒç»­æ”¹è¿›

## ğŸŒŸ ä¼˜åŠ¿

### 1. ä¸“ä¸šæ€§
- åŸºäºæ°´æ–‡å­¦åŸç†
- ä¸“å®¶çŸ¥è¯†é›†æˆ
- ç§‘å­¦ä¸¥è°¨æ€§

### 2. å®ç”¨æ€§
- ç›´æ¥åº”ç”¨ä»·å€¼
- ç®¡ç†å»ºè®®ç”Ÿæˆ
- é£é™©è¯„ä¼°æ”¯æŒ

### 3. å¯æ‰©å±•æ€§
- æ¨¡å—åŒ–è®¾è®¡
- çŸ¥è¯†åº“å¯æ‰©å±•
- å¤šåŒºåŸŸæ”¯æŒ

### 4. å¯é æ€§
- ç»Ÿè®¡éªŒè¯
- ç‰©ç†ä¸€è‡´æ€§
- ä¸“å®¶å®¡æŸ¥

## ğŸ¯ åº”ç”¨åœºæ™¯

### 1. æ°´æ–‡é¢„æµ‹
- SWEè¶‹åŠ¿åˆ†æ
- å­£èŠ‚æ€§æ¨¡å¼è¯†åˆ«
- å¼‚å¸¸æƒ…å†µé¢„è­¦

### 2. æ´ªæ°´ç®¡ç†
- é£é™©è¯„ä¼°
- é¢„è­¦ç³»ç»Ÿ
- åº”æ€¥å“åº”

### 3. æ°´èµ„æºç®¡ç†
- æ°´é‡è¯„ä¼°
- ä¾›éœ€å¹³è¡¡
- è§„åˆ’å†³ç­–

### 4. æ°”å€™å˜åŒ–é€‚åº”
- è¶‹åŠ¿åˆ†æ
- å½±å“è¯„ä¼°
- é€‚åº”ç­–ç•¥

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»ï¼š
- é¡¹ç›®ç»´æŠ¤è€…: Sean Li
- é‚®ç®±: lixiaowww@gmail.com
- é¡¹ç›®åœ°å€: https://github.com/lixiaowww/hydrai-swe

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ï¼Œè¯¦è§LICENSEæ–‡ä»¶ã€‚

---

**æ³¨æ„**: æœ¬çŸ¥è¯†åº“ç³»ç»ŸåŸºäºç§‘å­¦åŸç†å’Œä¸“å®¶çŸ¥è¯†æ„å»ºï¼Œä½†è§£è¯»ç»“æœä»…ä¾›å‚è€ƒã€‚å®é™…åº”ç”¨æ—¶è¯·ç»“åˆå…·ä½“æƒ…å†µå’Œä¸“ä¸šåˆ¤æ–­ã€‚
