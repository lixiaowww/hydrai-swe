<!DOCTYPE html>
<html>
<head>
    <title>Chart Rendering Test</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h1>Chart Rendering Test</h1>
    
    <div id="chart" style="width:800px;height:400px;"></div>
    
    <script>
        // Test data from backend
        const testData = {
            "trend": {
                "index": [
                    "1979-01-01 00:00:00",
                    "1979-01-02 00:00:00",
                    "1979-01-03 00:00:00",
                    "1979-01-04 00:00:00",
                    "1979-01-05 00:00:00"
                ],
                "values": [
                    18.608895852606807,
                    18.609047072171503,
                    18.60919817094107,
                    18.609349148113704,
                    18.60950000288495
                ]
            },
            "seasonal": {
                "index": [
                    "1979-01-01 00:00:00",
                    "1979-01-02 00:00:00",
                    "1979-01-03 00:00:00",
                    "1979-01-04 00:00:00",
                    "1979-01-05 00:00:00"
                ],
                "values": [
                    0.1,
                    0.2,
                    0.3,
                    0.4,
                    0.5
                ]
            },
            "resid": {
                "index": [
                    "1979-01-01 00:00:00",
                    "1979-01-02 00:00:00",
                    "1979-01-03 00:00:00",
                    "1979-01-04 00:00:00",
                    "1979-01-05 00:00:00"
                ],
                "values": [
                    -0.1,
                    -0.2,
                    -0.3,
                    -0.4,
                    -0.5
                ]
            }
        };
        
        console.log('Test data:', testData);
        
        const toTrace = (series, name, color) => {
            console.log(`Creating trace for ${name}:`, series);
            return {
                x: series.index || [],
                y: series.values || [],
                type: 'scatter',
                mode: 'lines',
                name,
                line: {color, width: 1.5}
            };
        };
        
        const traces = [];
        if (testData.trend) traces.push(toTrace(testData.trend, 'Trend', '#e74c3c'));
        if (testData.seasonal) traces.push(toTrace(testData.seasonal, 'Seasonal', '#2ecc71'));
        if (testData.resid) traces.push(toTrace(testData.resid, 'Residual', '#3498db'));
        
        console.log('Final traces:', traces);
        
        Plotly.newPlot('chart', traces, {
            title: 'Time Series Decomposition Test',
            height: 400,
            margin: {l: 40, r: 10, t: 40, b: 40},
            legend: {orientation: 'h'},
            xaxis: {title: 'Time'},
            yaxis: {title: 'Value'}
        }, {displaylogo: false, responsive: true});
    </script>
</body>
</html>
